---
title: "R_basic3"
author: "York Lin"
date: "2019年01月29日"
output: html_document
editor_options: 
  chunk_output_type: console
---

## p90 example
```{R}

match_func = function(filename){
  match = read.table(filename, sep= "|")
  mat = matrix(rep(-1,5^2), nrow=5)
  rownames(mat) = c("A","B","C","D","E")
  colnames(mat) = c("A","B","C","D","E")
  for (i in 1:nrow(match)){
    mat[match[i,1], match[i,2]] = match[i,3];
  }
  return(mat)
}

match_func('~/lecture/riii/data/match.txt')

#general case
match_func = function(filename,header=T,sep='|'){
  t = read.table(filename,header=header,sep = sep);
  mat = matrix(-1,
               nrow = length(levels(t[,1])),
               ncol = length(levels(t[,2])),
               dimnames = list( levels(t[,1]), levels(t[,2] ) ));

  for(i in 1:nrow(t)){
    mat[t[i,1], t[i,2]] = t[i,3];
  }
  return(mat)
}

match_func('~/lecture/riii/data/match.txt',F)
```

### 統計圖
```{R}
load('~/lecture/riii/Statistics/cdc.Rdata')
str(cdc)
cdc$exerany = as.factor(cdc$exerany)
cdc$hlthplan = as.factor(cdc$hlthplan)
cdc$smoke100 = as.factor(cdc$smoke100)

#屬貭資料: 長條圖、圓餅圖
barplot(table(cdc$smoke100))
?barplot
barplot(table(cdc$smoke100),xlab='有無吸菸',ylab='人數',main='title',col='blue',family="Songti SC")

pie(table(cdc$smoke100))
pie(table(cdc$genhlth))
pie(table(cdc$genhlth),col = rainbow(5))

#加上各分類比例
pct = round(table(cdc$genhlth) / length(cdc$genhlth) *100,1)
labels = paste(names(pct),pct,"%")
pie(table(cdc$genhlth), labels = labels)


gender_smokers = table(cdc$gender,cdc$smoke100)

mosaicplot(gender_smokers)
```

```{R}
#屬量資料: 直方圖、盒鬚圖、莖葉圖
hist(cdc$age)

par(mfrow=c(3,1))
hist(cdc$height)
hist(cdc$height,breaks = 30)
hist(cdc$height,breaks = 50)

stem(cdc$age)
tmp=sample(cdc$age,100)
stem(sample(cdc$age,100))
?stem
stem(sample(cdc$age,100),scale=2)

par(mfrow=c(1,1))
boxplot(cdc$weight)
boxplot(cdc$weight, horizontal=TRUE)
boxplot(cdc$weight ~ cdc$gender)
boxplot(cdc$height ~ cdc$gender)

bmi = (cdc$weight/cdc$height^2) * 703
boxplot(bmi ~ cdc$genhlth)

#觀察兩組資料間關係:點散布圖
plot(cdc$weight, cdc$height)
plot(cdc$weight, cdc$wtdesire)


png(filename='test123.png')
plot(cdc$weight, cdc$height)
dev.off()

```
